<div class="profile_wrapper">
  <h3>Edit Profile</h3>
  <button
    class="back_button"
    (click)="window.history.back()"
    *ngIf="loggedInUserType !== userTypes.USER"
  >
    Back
  </button>

  <form
    [formGroup]="profileForm"
    *ngIf="profileForm"
    (ngSubmit)="onFormSubmit(profileForm)"
  >
    <div>
      <div class="row">
        <div class="col-sm-4 col-md-4 col-lg-4">
          <label for="username"
          >User Name
          <span
            class="asterik"
            *ngIf="(profileForm.controls?.name.validator({}))['required']"
            >*</span
          >
        </label>
        </div>
        <div class="col-sm-8 col-md-8 col-lg-8">
          <input
          id="name"
          type="text"
          formControlName="name"
          class="form-control"
          [ngClass]="{
            'is-invalid': formErrors && profileForm.controls.name.errors
          }"
        />    
        </div>
      </div>
      
      
    </div>
    <small
      *ngIf="GetFormControlErrors('name') as error"
      class="form-field-error-message"
    >
      <span *ngIf="error?.required"> User name cannot be empty. </span>
      <span *ngIf="error?.pattern">
        User name must of only Alphabet characters only and 1st letter must be
        capital.</span
      >
    </small>

    <div>
      <div class="row">
        <div class="col-sm-4 col-md-4 col-lg-4">
          <label for="email"
          >Email ID
          <span
            class="asterik"
            *ngIf="profileForm.controls.email.validator({})['required']"
            >*</span
          >
        </label>
        </div>
        <div class="col-sm-8 col-md-8 col-lg-8">
          <input
          id="email"
          type="email"
          formControlName="email"
          class="form-control"
          [ngClass]="{
            'is-invalid': formErrors && profileForm.controls.email.errors
          }"
        />
        </div>
      </div>
      
      
    </div>

    <div>
      <div class="row">
        <div class="col-sm-4 col-md-4 col-lg-4">
          <label for="mobile"
          >Mobile No
          <span
            class="asterik"
            *ngIf="profileForm.controls.mobile.validator({})['required']"
            >*</span
          >
        </label>
        </div>
        <div class="col-sm-8 col-md-8 col-lg-8">
          <input
          id="mobile"
          type="text"
          formControlName="mobile"
          class="form-control"
          [ngClass]="{
            'is-invalid': formErrors && profileForm.controls.mobile.errors
          }"
        />
        </div>
      </div>
      
      
    </div>

    <div>
      <div class="row">
        <div class="col-sm-4 col-md-4 col-lg-4">
          <label for="designation"
          >Designation
          <span
            class="asterik"
            *ngIf="profileForm.controls.designation.validator({})['required']"
            >*</span
          >
        </label>
        </div>
        <div class="col-sm-8 col-md-8 col-lg-8">
          <input
          id="designation"
          type="text"
          formControlName="designation"
          class="form-control"
          [ngClass]="{
            'is-invalid': formErrors && profileForm.controls.designation.errors
          }"
        />
        </div>
      </div>
      
      
    </div>
    <small
      *ngIf="GetFormControlErrors('designation') as error"
      class="form-field-error-message"
    >
      <span *ngIf="error?.required"> Designation cannot be empty. </span>
    </small>

    <div>
      <div class="row">
        <div class="col-sm-4 col-md-4 col-lg-4">
          <label for="organization"
          >Organisation/Institution Name
          <span
            class="asterik"
            *ngIf="profileForm.controls.organization.validator({})['required']"
            >*</span
          >
        </label>
        </div>
        <div class="col-sm-8 col-md-8 col-lg-8">
          <input
          id="organization"
          type="text"
          formControlName="organization"
          class="form-control"
          [ngClass]="{
            'is-invalid': formErrors && profileForm.controls.organization.errors
          }"
        />
        </div>
      </div>
      
      
    </div>
    <small
      *ngIf="GetFormControlErrors('organization') as error"
      class="form-field-error-message"
    >
      <span *ngIf="error?.required">
        Organisation/Institution Name cannot be empty.
      </span>
    </small>

    <p *ngIf="formErrors">
      <span
        *ngFor="let error of formErrors; let i = index"
        style="display: block; color: red"
      >
        {{ i + 1 }}. {{ error }}
      </span>
    </p>

    <p *ngIf="response.successMessage" class="success-message">
      {{ response.successMessage }}
    </p>
    <p *ngIf="response.errorMessage" class="error-message">
      {{ response.errorMessage }}
    </p>

    <div class="input-group" *ngIf="canEditProfile">
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="!profileForm.valid || profileForm.disabled"
      >
        Update Profile
      </button>
    </div>
  </form>
</div>
